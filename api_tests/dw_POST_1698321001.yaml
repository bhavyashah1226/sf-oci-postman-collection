# Test generated by RoostGPT for test demo1 using AI Type Azure Open AI and AI Model roost-gpt4-32k

# declaring config
config:
  target: "{{ $processEnvironment.API_HOST }}"
  plugins:
    expect: {}

# defining payloads
payload:
  path: "dw_POST_1698321001.csv"
  fields: 
    - "client_id"
    - "client_password"
  skipHeader: true

# declaring scenarios
scenarios:

  # Successful API request
  - name: "Successful API request"
    flow:
    - post:
        url: "/dw/oauth2/access_token"
        headers:
          Content-Type: "application/x-www-form-urlencoded"
        json:
          grant_type: "client_credentials"
          scope: "{{api_scopes}}"
        auth:
          type: "basic"
          username: "{{client_id}}"
          password: "{{client_password}}"
        expect:
          - statusCode: 200
          - hasProperty: "token_type"
          - hasProperty: "access_token"

  # API request with validation failure
  - name: "API request with validation failure"
    flow:
    - post:
        url: "/dw/oauth2/wrong_access_token" # Invalid URL
        headers:
          Content-Type: "application/x-www-form-urlencoded"
        json:
          grant_type: "client_credentials"
          scope: "{{api_scopes}}"
        auth:
          type: "basic"
          username: "{{client_id}}"
          password: "{{client_password}}"
        expect:
          - statusCode: 400

  # API request with edge case
  - name: "API request with edge case"
    flow:
    - post:
        url: "/dw/oauth2/access_token"
        headers:
          Content-Type: "application/x-www-form-urlencoded"
        json:
          grant_type: "client_credentials"
          scope: "@<>!9984Na" # Edge case with special characters
        auth:
          type: "basic"
          username: "{{client_id}}"
          password: "{{client_password}}"
        expect:
          - statusCode: {
                "in": [400, 500]
            } # Acceptable range of status code
