# Test generated by RoostGPT for test demo1 using AI Type Azure Open AI and AI Model roost-gpt4-32k

config:
  target: "{{ $processEnvironment.API_HOST }}"
  plugins:
    expect: {}
  override: true
  environments:
    production:
      target: "{{ $processEnvironment.API_HOST }}"
  defaults:
    headers:
      Content-Type: application/json
      Authorization: "{{ $processEnvironment._authorization_key }}"

scenarios:
  - name: "Successful API request"
    flow:
      - post:
          url: "/inventory/availability/{{ $processEnvironment.api_version }}/organizations/{{ $processEnvironment.tenant_group_id }}/availability-records/actions/get-deltas"
          json:
            deltaToken: "{{ $processEnvironment._export_availability_records_per_location_group_delta_token }}"
          capture:
            json: "$.nextDeltaToken"
            as: "_export_availability_records_per_location_group_delta_token"
          expect:
            - statusCode: 200
            - hasProperty: ["nextDeltaToken"]

  - name: "API request with validation failure"
    flow:
      - post:
          url: "/inventory/availability/invalid-version/organizations/invalid-tenant-id/availability-records/actions/get-deltas"
          json:
            deltaToken: "invalid-token"
          expect:
            - statusCode: 400

  - name: "API request with edge case"
    flow:
      - post:
          url: "/inventory/availability/{{ $processEnvironment.api_version }}/organizations/{{ $processEnvironment.tenant_group_id }}/availability-records/actions/get-deltas"
          json:
            deltaToken: "edge-case-token"
          expect:
            - statusCode: "{{ $processEnvironment.expected_status_code }}"
            - hasProperty: ["{{ $processEnvironment.expected_property }}"]
